<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.sap.smartbi.backend</groupId>
  <artifactId>hcp</artifactId>
  <version>0.0.2</version>
  <packaging>pom</packaging>

  <parent>
    <groupId>com.sap.ldi</groupId>
    <artifactId>ldi-parent</artifactId>
    <version>7.4.0</version>
  </parent>

  <properties>

    <!-- Never implicitly drop "lumira" schema -->
    <skip.drop.lumira.ds.user>true</skip.drop.lumira.ds.user>

    <!-- Typical parameters -->
    <hcp.account>aod</hcp.account>
    <hcp.size>lite</hcp.size>
    <hcp.connections>2</hcp.connections>
    <hcp.processes.min>1</hcp.processes.min>
    <hcp.processes.max>1</hcp.processes.max>
    <hcp.dispatcher>dispatcher</hcp.dispatcher>
    <hcp.provider.account />
    <hcp.vm.arguments />
    <hcp.account.separator />
    <hcp.application.version/>
    <hcp.application.descriptor>neo-app.json</hcp.application.descriptor>
    <hcp.maintenance.application.version>${hcp.application.version}-maintenance</hcp.maintenance.application.version>
    <retry.count>0</retry.count>
    <custom.dir>todeploy</custom.dir>
    <skip.copy.artifacts>true</skip.copy.artifacts>
    <skip.purge>true</skip.purge>

    <!-- Read from versions.properties -->
    <!--<binaries.version/> -->

    <!-- Neo SDK to use for deploying and other actions (except for fetching 
			destinations' passwords -->
    <neo.maven.plugin.version>2.34.8</neo.maven.plugin.version>

    <!-- Platform domain support. Google "Hana HCP Platform Domain" for more 
			details -->
    <!-- By default, empty field will result in default domain -->
    <hcp.private>false</hcp.private>
    <hcp.platform />

    <!-- Used for binding an HCP productive instance -->
    <!--<default.ds.id/> <default.ds.user>${hcp.application.uppercase}_WEB</default.ds.user> 
			<default.ds.password></default.ds.password> <stagingarea.ds.id/> <stagingarea.ds.user>${hcp.application.uppercase}_QUERY</stagingarea.ds.user> 
			<stagingarea.ds.password></stagingarea.ds.password> <lumira.ds.id/> <lumira.ds.user>${hcp.application.uppercase}_DATA</lumira.ds.user> 
			<lumira.ds.password></lumira.ds.password> -->

    <!-- By default, we do NOT purge the snapshot binaries from the Maven repo 
			However, with all actions implying a deployment, we set it to false at each 
			relevant profile The -Dskip.purge=[true|false] is still applicable -->
    <skip.purge.resolved>${skip.purge}</skip.purge.resolved>

    <!-- Routine stuff -->
    <deploy.dir>${project.build.directory}/${custom.dir}</deploy.dir>
    <binaries.dir>${project.build.directory}/todeploy</binaries.dir>
    <destinations.dir>${project.build.directory}/destinations</destinations.dir>
    <content.dir>${project.build.directory}/content</content.dir>
    <standard.content.dir>${content.dir}/standard</standard.content.dir>
    <maintenance.content.dir>${content.dir}/maintenance</maintenance.content.dir>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>

  </properties>

  <distributionManagement>
    <repository>
      <id>deploy.milestones</id>
      <url>http://nexus:8081/nexus/content/repositories/deploy.milestones/</url>
    </repository>
    <snapshotRepository>
      <id>deploy.snapshots</id>
      <url>http://nexus:8081/nexus/content/repositories/deploy.snapshots/</url>
    </snapshotRepository>
  </distributionManagement>

  <profiles>



    <profile>
      <!-- Use this profile in conjunction with "put-destinations" in order 
				to generate destinations in a subscribing account -->
      <id>subscription</id>
      <properties>
        <hcp.account.separator>-</hcp.account.separator>
      </properties>
    </profile>

    <profile>
      <id>create-account</id>
      <activation>
        <property>
          <name>action</name>
          <value>create-account</value>
        </property>
      </activation>
      <build>
        <plugins>
          <plugin>
            <groupId>com.sap.cloud</groupId>
            <artifactId>neo-java-web-maven-plugin</artifactId>
            <executions>
              <execution>
                <id>create-account</id>
                <phase>deploy</phase>
                <goals>
                  <goal>create-account</goal>
                </goals>
                <configuration>
                  <displayName>${hcp.displayName}</displayName>
                </configuration>
              </execution>
            </executions>
          </plugin>
        </plugins>
      </build>
    </profile>



    <profile>
      <id>delete-account</id>
      <activation>
        <property>
          <name>action</name>
          <value>delete-account</value>
        </property>
      </activation>
      <build>
        <plugins>
          <plugin>
            <groupId>com.sap.cloud</groupId>
            <artifactId>neo-java-web-maven-plugin</artifactId>
            <executions>
              <execution>
                <id>delete-account</id>
                <phase>deploy</phase>
                <goals>
                  <goal>delete-account</goal>
                </goals>
              </execution>
            </executions>
          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
      <id>subscribe</id>
      <activation>
        <property>
          <name>action</name>
          <value>subscribe</value>
        </property>
      </activation>
      <build>
        <plugins>
          <plugin>
            <groupId>com.sap.cloud</groupId>
            <artifactId>neo-java-web-maven-plugin</artifactId>
            <executions>
              <execution>
                <id>subscribe</id>
                <phase>deploy</phase>
                <goals>
                  <goal>subscribe</goal>
                </goals>
                <configuration>
                  <application>${hcp.provider.account}:${hcp.application}</application>
                </configuration>
              </execution>
            </executions>
          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
      <id>unsubscribe</id>
      <activation>
        <property>
          <name>action</name>
          <value>unsubscribe</value>
        </property>
      </activation>
      <build>
        <plugins>
          <plugin>
            <groupId>com.sap.cloud</groupId>
            <artifactId>neo-java-web-maven-plugin</artifactId>
            <executions>
              <execution>
                <id>unsubscribe</id>
                <phase>deploy</phase>
                <goals>
                  <goal>unsubscribe</goal>
                </goals>
                <configuration>
                  <application>${hcp.provider.account}:${hcp.application}</application>
                </configuration>
              </execution>
            </executions>
          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
      <id>restart</id>
      <activation>
        <property>
          <name>action</name>
          <value>restart</value>
        </property>
      </activation>
      <build>
        <plugins>
          <plugin>
            <groupId>com.sap.cloud</groupId>
            <artifactId>neo-java-web-maven-plugin</artifactId>
            <executions>
              <execution>
                <id>restart</id>
                <phase>deploy</phase>
                <goals>
                  <goal>stop</goal>
                  <goal>start</goal>
                </goals>
                <configuration>
                  <application>${hcp.application}</application>
                </configuration>
              </execution>
            </executions>
          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
      <id>status</id>
      <activation>
        <property>
          <name>action</name>
          <value>status</value>
        </property>
      </activation>
      <build>
        <plugins>
          <plugin>
            <groupId>com.sap.cloud</groupId>
            <artifactId>neo-java-web-maven-plugin</artifactId>
            <executions>
              <execution>
                <id>status</id>
                <phase>deploy</phase>
                <goals>
                  <goal>status</goal>
                </goals>
                <configuration>
                  <application>${hcp.application}</application>
                </configuration>
              </execution>
            </executions>
          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
      <id>list-application-domains</id>
      <activation>
        <property>
          <name>action</name>
          <value>list-application-domains</value>
        </property>
      </activation>
      <build>
        <plugins>
          <plugin>
            <groupId>com.sap.cloud</groupId>
            <artifactId>neo-java-web-maven-plugin</artifactId>
            <executions>
              <execution>
                <id>list-domains</id>
                <phase>deploy</phase>
                <goals>
                  <goal>list-application-domains</goal>
                </goals>
                <configuration>
                  <application>${hcp.application}</application>
                  <host>${hcp.host}</host>
                </configuration>
              </execution>
            </executions>
          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
      <id>set-private</id>
      <activation>
        <property>
          <name>action</name>
          <value>set-private</value>
        </property>
      </activation>
      <build>
        <plugins>
          <plugin>
            <groupId>com.sap.cloud</groupId>
            <artifactId>neo-java-web-maven-plugin</artifactId>
            <executions>
              <execution>
                <id>set-private</id>
                <phase>deploy</phase>
                <goals>
                  <goal>add-platform-domain</goal>
                </goals>
                <configuration>
                  <application>${hcp.application}</application>
                  <platformDomain>svc.${hcp.host}</platformDomain>
                  <host>${hcp.host}</host>
                </configuration>
              </execution>
              <execution>
                <id>unset-default</id>
                <phase>deploy</phase>
                <goals>
                  <goal>remove-platform-domain</goal>
                </goals>
                <configuration>
                  <application>${hcp.application}</application>
                  <platformDomain>${hcp.host}</platformDomain>
                  <host>${hcp.host}</host>
                </configuration>
              </execution>
              <execution>
                <id>list-domains</id>
                <phase>deploy</phase>
                <goals>
                  <goal>list-application-domains</goal>
                </goals>
                <configuration>
                  <application>${hcp.application}</application>
                  <host>${hcp.host}</host>
                </configuration>
              </execution>
            </executions>
          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
      <id>unset-private</id>
      <activation>
        <property>
          <name>action</name>
          <value>unset-private</value>
        </property>
      </activation>
      <build>
        <plugins>
          <plugin>
            <groupId>com.sap.cloud</groupId>
            <artifactId>neo-java-web-maven-plugin</artifactId>
            <executions>
              <execution>
                <id>set-default</id>
                <phase>deploy</phase>
                <goals>
                  <goal>add-platform-domain</goal>
                </goals>
                <configuration>
                  <application>${hcp.application}</application>
                  <platformDomain>${hcp.host}</platformDomain>
                  <host>${hcp.host}</host>
                </configuration>
              </execution>
              <execution>
                <id>unset-private</id>
                <phase>deploy</phase>
                <goals>
                  <goal>remove-platform-domain</goal>
                </goals>
                <configuration>
                  <application>${hcp.application}</application>
                  <platformDomain>svc.${hcp.host}</platformDomain>
                  <host>${hcp.host}</host>
                </configuration>
              </execution>
              <execution>
                <id>list-domains</id>
                <phase>deploy</phase>
                <goals>
                  <goal>list-application-domains</goal>
                </goals>
                <configuration>
                  <application>${hcp.application}</application>
                  <host>${hcp.host}</host>
                </configuration>
              </execution>
            </executions>
          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
      <id>private</id>
      <activation>
        <property>
          <name>hcp.private</name>
          <value>true</value>
        </property>
      </activation>
      <properties>
        <hcp.platform>.svc</hcp.platform>
      </properties>
    </profile>

    <profile>
      <id>rolling-update</id>
      <activation>
        <property>
          <name>action</name>
          <value>rolling-update</value>
        </property>
      </activation>
      <properties>
        <skip.purge>false</skip.purge>
        <skip.copy.artifacts>false</skip.copy.artifacts>
      </properties>
      <build>
        <plugins>
          <plugin>
            <groupId>com.sap.cloud</groupId>
            <artifactId>neo-java-web-maven-plugin</artifactId>
            <executions>
              <execution>
                <id>rolling-update</id>
                <phase>deploy</phase>
                <goals>
                  <goal>rolling-update</goal>
                </goals>
                <configuration>
                  <application>${hcp.application}</application>
                  <size>${hcp.size}</size>
                  <minimumProcesses>${hcp.processes.min}</minimumProcesses>
                  <maximumProcesses>${hcp.processes.max}</maximumProcesses>
                  <vmArguments>${hcp.vm.arguments}</vmArguments>
                </configuration>
              </execution>
            </executions>
          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
      <id>hot-update</id>
      <activation>
        <property>
          <name>action</name>
          <value>hot-update</value>
        </property>
      </activation>
      <properties>
        <skip.purge>false</skip.purge>
        <skip.copy.artifacts>false</skip.copy.artifacts>
      </properties>
      <build>
        <plugins>
          <plugin>
            <groupId>com.sap.cloud</groupId>
            <artifactId>neo-java-web-maven-plugin</artifactId>
            <executions>
              <execution>
                <id>hot-update</id>
                <phase>deploy</phase>
                <goals>
                  <goal>hot-update</goal>
                </goals>
                <configuration>
                  <application>${hcp.application}</application>
                  <strategy>reprovision-runtime</strategy>
                </configuration>
              </execution>
            </executions>
          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
      <id>put-destinations</id>
      <activation>
        <property>
          <name>action</name>
          <value>put-destinations</value>
        </property>
      </activation>
      <build>
        <plugins>
          <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-resources-plugin</artifactId>
            <version>2.7</version>
            <executions>
              <execution>
                <id>copy-destinations</id>
                <phase>process-resources</phase>
                <goals>
                  <goal>copy-resources</goal>
                </goals>
                <configuration>
                  <outputDirectory>${destinations.dir}</outputDirectory>
                  <resources>
                    <resource>
                      <directory>destinations</directory>
                      <filtering>true</filtering>
                    </resource>
                  </resources>
                </configuration>
              </execution>
            </executions>
          </plugin>
          <plugin>
            <groupId>com.sap.cloud</groupId>
            <artifactId>neo-java-web-maven-plugin</artifactId>
            <executions>
              <execution>
                <id>put-admin</id>
                <phase>deploy</phase>
                <goals>
                  <goal>put-destination</goal>
                </goals>
                <configuration>
                  <host>${hcp.host}</host>
                  <localpath>${destinations.dir}/admin.txt</localpath>
                </configuration>
              </execution>
              <execution>
                <id>put-backend</id>
                <phase>deploy</phase>
                <goals>
                  <goal>put-destination</goal>
                </goals>
                <configuration>
                  <host>${hcp.host}</host>
                  <localpath>${destinations.dir}/backend.txt</localpath>
                </configuration>
              </execution>
              <execution>
                <id>put-crawler</id>
                <phase>deploy</phase>
                <goals>
                  <goal>put-destination</goal>
                </goals>
                <configuration>
                  <host>${hcp.host}</host>
                  <localpath>${destinations.dir}/crawler.txt</localpath>
                </configuration>
              </execution>
              <execution>
                <id>put-CCIQueryService</id>
                <phase>deploy</phase>
                <goals>
                  <goal>put-destination</goal>
                </goals>
                <configuration>
                  <host>${hcp.host}</host>
                  <localpath>${destinations.dir}/CCIQueryService.txt</localpath>
                </configuration>
              </execution>
              <execution>
                <id>put-hub</id>
                <phase>deploy</phase>
                <goals>
                  <goal>put-destination</goal>
                </goals>
                <configuration>
                  <host>${hcp.host}</host>
                  <localpath>${destinations.dir}/smartbi.txt</localpath>
                </configuration>
              </execution>
            </executions>
          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
      <id>delete-destinations</id>
      <activation>
        <property>
          <name>action</name>
          <value>delete-destinations</value>
        </property>
      </activation>
      <build>
        <plugins>
          <plugin>
            <groupId>com.sap.cloud</groupId>
            <artifactId>neo-java-web-maven-plugin</artifactId>
            <executions>
              <execution>
                <id>delete-admin</id>
                <phase>deploy</phase>
                <goals>
                  <goal>delete-destination</goal>
                </goals>
                <configuration>
                  <name>${hcp.application}-admin</name>
                </configuration>
              </execution>
              <execution>
                <id>delete-hub</id>
                <phase>deploy</phase>
                <goals>
                  <goal>delete-destination</goal>
                </goals>
                <configuration>
                  <name>${hcp.application}-smartbi</name>
                </configuration>
              </execution>
              <execution>
                <id>delete-crawler</id>
                <phase>deploy</phase>
                <goals>
                  <goal>delete-destination</goal>
                </goals>
                <configuration>
                  <name>${hcp.application}-crawler</name>
                </configuration>
              </execution>
              <execution>
                <id>delete-CCIQueryService</id>
                <phase>deploy</phase>
                <goals>
                  <goal>delete-destination</goal>
                </goals>
                <configuration>
                  <name>${hcp.application}-CCIQueryService</name>
                </configuration>
              </execution>
              <execution>
                <id>delete-backend</id>
                <phase>deploy</phase>
                <goals>
                  <goal>delete-destination</goal>
                </goals>
                <configuration>
                  <name>${hcp.application}-backend</name>
                </configuration>
              </execution>
            </executions>
            <configuration>
              <host>${hcp.host}</host>
              <failOnError>false</failOnError>
            </configuration>
          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
      <id>start</id>
      <activation>
        <property>
          <name>action</name>
          <value>start</value>
        </property>
      </activation>
      <build>
        <plugins>
          <plugin>
            <groupId>com.sap.cloud</groupId>
            <artifactId>neo-java-web-maven-plugin</artifactId>
            <executions>
              <execution>
                <id>start</id>
                <phase>deploy</phase>
                <goals>
                  <goal>start</goal>
                </goals>
                <configuration>
                  <application>${hcp.application}</application>
                </configuration>
              </execution>
            </executions>
          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
      <id>stop</id>
      <activation>
        <property>
          <name>action</name>
          <value>stop</value>
        </property>
      </activation>
      <build>
        <plugins>
          <plugin>
            <groupId>com.sap.cloud</groupId>
            <artifactId>neo-java-web-maven-plugin</artifactId>
            <executions>
              <execution>
                <id>stop</id>
                <phase>deploy</phase>
                <goals>
                  <goal>stop</goal>
                </goals>
                <configuration>
                  <application>${hcp.application}</application>
                </configuration>
              </execution>
            </executions>
          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
      <id>deploy</id>
      <activation>
        <property>
          <name>action</name>
          <value>deploy</value>
        </property>
      </activation>
      <properties>
        <skip.purge>false</skip.purge>
        <skip.copy.artifacts>false</skip.copy.artifacts>
      </properties>
      <build>
        <plugins>
          <plugin>
            <groupId>com.sap.cloud</groupId>
            <artifactId>neo-java-web-maven-plugin</artifactId>
            <executions>
              <execution>
                <id>deploy</id>
                <phase>deploy</phase>
                <goals>
                  <goal>deploy</goal>
                </goals>
                <configuration>
                  <application>${hcp.application}</application>
                  <size>${hcp.size}</size>
                  <minimumProcesses>${hcp.processes.min}</minimumProcesses>
                  <maximumProcesses>${hcp.processes.max}</maximumProcesses>
                  <vmArguments>${hcp.vm.arguments}</vmArguments>
                </configuration>
              </execution>
            </executions>
          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
      <id>undeploy</id>
      <activation>
        <property>
          <name>action</name>
          <value>undeploy</value>
        </property>
      </activation>
      <build>
        <plugins>
          <plugin>
            <groupId>com.sap.cloud</groupId>
            <artifactId>neo-java-web-maven-plugin</artifactId>
            <executions>
              <execution>
                <id>stop</id>
                <phase>deploy</phase>
                <goals>
                  <goal>stop</goal>
                </goals>
                <configuration>
                  <failOnError>false</failOnError>
                </configuration>
              </execution>
              <execution>
                <id>undeploy</id>
                <phase>deploy</phase>
                <goals>
                  <goal>undeploy</goal>
                </goals>
              </execution>
            </executions>
            <configuration>
              <application>${hcp.application}</application>
            </configuration>
          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
      <id>respawn</id>
      <activation>
        <property>
          <name>action</name>
          <value>respawn</value>
        </property>
      </activation>
      <properties>
        <skip.purge>false</skip.purge>
        <skip.copy.artifacts>false</skip.copy.artifacts>
      </properties>
      <build>
        <plugins>
          <plugin>
            <groupId>com.sap.cloud</groupId>
            <artifactId>neo-java-web-maven-plugin</artifactId>
            <executions>
              <execution>
                <id>deploy</id>
                <phase>deploy</phase>
                <goals>
                  <goal>deploy</goal>
                  <goal>stop</goal>
                  <goal>start</goal>
                </goals>
                <configuration>
                  <application>${hcp.application}</application>
                  <size>${hcp.size}</size>
                  <minimumProcesses>${hcp.processes.min}</minimumProcesses>
                  <maximumProcesses>${hcp.processes.max}</maximumProcesses>
                  <vmArguments>${hcp.vm.arguments}</vmArguments>
                </configuration>
              </execution>
            </executions>
          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
      <id>spawn</id>
      <activation>
        <property>
          <name>action</name>
          <value>spawn</value>
        </property>
      </activation>
      <properties>
        <skip.purge>false</skip.purge>
        <skip.copy.artifacts>false</skip.copy.artifacts>
      </properties>
      <build>
        <plugins>
          <plugin>
            <groupId>com.sap.cloud</groupId>
            <artifactId>neo-java-web-maven-plugin</artifactId>
            <executions>
              <execution>
                <id>deploy</id>
                <phase>deploy</phase>
                <goals>
                  <goal>deploy</goal>
                  <goal>start</goal>
                </goals>
                <configuration>
                  <application>${hcp.application}</application>
                  <size>${hcp.size}</size>
                  <minimumProcesses>${hcp.processes.min}</minimumProcesses>
                  <maximumProcesses>${hcp.processes.max}</maximumProcesses>
                  <vmArguments>${hcp.vm.arguments}</vmArguments>
                </configuration>
              </execution>
            </executions>
          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
      <id>rebind-schemas</id>
      <activation>
        <property>
          <name>action</name>
          <value>rebind-schemas</value>
        </property>
      </activation>
      <build>
        <plugins>
          <plugin>
            <groupId>com.sap.cloud</groupId>
            <artifactId>neo-java-web-maven-plugin</artifactId>
            <executions>
              <!-- web component -->
              <execution>
                <id>unbind-default</id>
                <phase>deploy</phase>
                <goals>
                  <goal>unbind-schema</goal>
                </goals>
              </execution>
              <execution>
                <id>bind-lumira</id>
                <phase>deploy</phase>
                <goals>
                  <goal>bind-schema</goal>
                </goals>
                <configuration>
                  <dataSource>lumira</dataSource>
                  <id>${hcp.account}.lumira.web</id>
                </configuration>
              </execution>
              <execution>
                <id>bind-DefaultDB</id>
                <phase>deploy</phase>
                <goals>
                  <goal>bind-schema</goal>
                </goals>
                <configuration>
                  <dataSource>jdbc/DefaultDB</dataSource>
                  <id>${hcp.account}.${hcp.application}.web</id>
                </configuration>
              </execution>
              <execution>
                <id>bind-StagingAreaDatasource</id>
                <phase>deploy</phase>
                <goals>
                  <goal>bind-schema</goal>
                </goals>
                <configuration>
                  <dataSource>jdbc/StagingAreaDatasource</dataSource>
                  <id>${hcp.account}.${hcp.application}.query</id>
                </configuration>
              </execution>
            </executions>
            <configuration>
              <application>${hcp.application}</application>
              <failOnError>false</failOnError>
            </configuration>
          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
      <id>unbind-schemas</id>
      <activation>
        <property>
          <name>action</name>
          <value>unbind-schemas</value>
        </property>
      </activation>
      <build>
        <plugins>
          <plugin>
            <groupId>com.sap.cloud</groupId>
            <artifactId>neo-java-web-maven-plugin</artifactId>
            <executions>
              <execution>
                <id>unbind-StagingAreaDataSource</id>
                <phase>deploy</phase>
                <goals>
                  <goal>unbind-schema</goal>
                </goals>
                <configuration>
                  <dataSource>jdbc/StagingAreaDatasource</dataSource>
                </configuration>
              </execution>
              <execution>
                <id>unbind-DefaultDB</id>
                <phase>deploy</phase>
                <goals>
                  <goal>unbind-schema</goal>
                </goals>
                <configuration>
                  <dataSource>jdbc/DefaultDB</dataSource>
                </configuration>
              </execution>
              <execution>
                <id>unbind-lumira</id>
                <phase>deploy</phase>
                <goals>
                  <goal>unbind-schema</goal>
                </goals>
                <configuration>
                  <dataSource>lumira</dataSource>
                </configuration>
              </execution>
            </executions>
            <configuration>
              <application>${hcp.application}</application>
              <failOnError>false</failOnError>
            </configuration>
          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
      <id>delete-schemas</id>
      <activation>
        <property>
          <name>action</name>
          <value>delete-schemas</value>
        </property>
      </activation>
      <build>
        <plugins>
          <plugin>
            <groupId>com.sap.cloud</groupId>
            <artifactId>neo-java-web-maven-plugin</artifactId>
            <executions>
              <!-- delete existing schemas, along with associated bindings -->
              <execution>
                <id>delete-web-schema</id>
                <phase>deploy</phase>
                <goals>
                  <goal>delete-schema</goal>
                </goals>
                <configuration>
                  <id>${hcp.account}.${hcp.application}.web</id>
                </configuration>
              </execution>
              <execution>
                <id>delete-query-schema</id>
                <phase>deploy</phase>
                <goals>
                  <goal>delete-schema</goal>
                </goals>
                <configuration>
                  <id>${hcp.account}.${hcp.application}.query</id>
                </configuration>
              </execution>
            </executions>
            <configuration>
              <force>true</force>
              <silent>true</silent>
              <failOnError>false</failOnError>
            </configuration>
          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
      <id>create-db-users</id>
      <activation>
        <property>
          <name>action</name>
          <value>create-db-users</value>
        </property>
      </activation>
      <build>
        <plugins>
          <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-invoker-plugin</artifactId>
            <executions>
              <execution>
                <id>create-default-db-user</id>
                <phase>integration-test</phase>
                <goals>
                  <goal>integration-test</goal>
                </goals>
                <configuration>
                  <properties>
                    <sql.script>create-dbuser</sql.script>
                    <hcp.db.id>${default.ds.id}</hcp.db.id>
                    <user.name>${default.ds.user}</user.name>
                    <user.password>${default.ds.password}</user.password>
                  </properties>
                </configuration>
              </execution>
              <execution>
                <id>create-staging-db-user</id>
                <phase>integration-test</phase>
                <goals>
                  <goal>integration-test</goal>
                </goals>
                <configuration>
                  <properties>
                    <sql.script>create-dbuser</sql.script>
                    <hcp.db.id>${stagingarea.ds.id}</hcp.db.id>
                    <user.name>${stagingarea.ds.user}</user.name>
                    <user.password>${stagingarea.ds.password}</user.password>
                  </properties>
                </configuration>
              </execution>
              <execution>
                <id>create-lumira-db-user</id>
                <phase>integration-test</phase>
                <goals>
                  <goal>integration-test</goal>
                </goals>
                <configuration>
                  <properties>
                    <sql.script>create-dbuser</sql.script>
                    <hcp.db.id>${lumira.ds.id}</hcp.db.id>
                    <user.name>${lumira.ds.user}</user.name>
                    <user.password>${lumira.ds.password}</user.password>
                  </properties>
                </configuration>
              </execution>
              <execution>
                <id>grant-lumira-select-privileges</id>
                <phase>integration-test</phase>
                <goals>
                  <goal>integration-test</goal>
                </goals>
                <configuration>
                  <properties>
                    <sql.script>grant-select-to-_SYS_REPO</sql.script>
                    <hcp.db.id>${lumira.ds.id}</hcp.db.id>
                    <hcp.db.user>${lumira.ds.user}</hcp.db.user>
                    <hcp.db.password>${lumira.ds.password}</hcp.db.password>
                    <schema.name>${lumira.ds.user}</schema.name>
                  </properties>
                </configuration>
              </execution>
            </executions>
          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
      <id>drop-db-users</id>
      <activation>
        <property>
          <name>action</name>
          <value>drop-db-users</value>
        </property>
      </activation>
      <properties>
        <sql.script>drop-dbuser</sql.script>
      </properties>
      <build>
        <plugins>
          <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-invoker-plugin</artifactId>
            <executions>
              <execution>
                <id>drop-lumira-db-user</id>
                <phase>integration-test</phase>
                <goals>
                  <goal>integration-test</goal>
                </goals>
                <configuration>
                  <skipInvocation>${skip.drop.lumira.ds.user}</skipInvocation>
                  <properties>
                    <hcp.db.id>${lumira.ds.id}</hcp.db.id>
                    <user.name>${lumira.ds.user}</user.name>
                  </properties>
                </configuration>
              </execution>
              <execution>
                <id>drop-staging-db-user</id>
                <phase>integration-test</phase>
                <goals>
                  <goal>integration-test</goal>
                </goals>
                <configuration>
                  <properties>
                    <hcp.db.id>${stagingarea.ds.id}</hcp.db.id>
                    <user.name>${stagingarea.ds.user}</user.name>
                  </properties>
                </configuration>
              </execution>
              <execution>
                <id>drop-default-db-user</id>
                <phase>integration-test</phase>
                <goals>
                  <goal>integration-test</goal>
                </goals>
                <configuration>
                  <properties>
                    <hcp.db.id>${default.ds.id}</hcp.db.id>
                    <user.name>${default.ds.user}</user.name>
                  </properties>
                </configuration>
              </execution>
            </executions>
            <configuration>
              <properties>
                <sql.script>drop-dbuser</sql.script>
              </properties>
            </configuration>
          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
      <id>bind-productive-instance</id>
      <activation>
        <property>
          <name>action</name>
          <value>bind-productive-instance</value>
        </property>
      </activation>
      <build>
        <plugins>
          <plugin>
            <groupId>com.sap.cloud</groupId>
            <artifactId>neo-java-web-maven-plugin</artifactId>
            <executions>
              <execution>
                <id>unbind-default-schema</id>
                <phase>deploy</phase>
                <goals>
                  <goal>unbind-schema</goal>
                </goals>
                <configuration>
                  <failOnError>false</failOnError>
                </configuration>
              </execution>
              <execution>
                <id>bind-default</id>
                <phase>deploy</phase>
                <goals>
                  <goal>bind-hana-dbms</goal>
                </goals>
                <configuration>
                  <id>${default.ds.id}</id>
                  <dbUser>${default.ds.user}</dbUser>
                  <dbPassword>${default.ds.password}</dbPassword>
                  <dataSource>jdbc/DefaultDB</dataSource>
                </configuration>
              </execution>
              <execution>
                <id>bind-staging-area</id>
                <phase>deploy</phase>
                <goals>
                  <goal>bind-hana-dbms</goal>
                </goals>
                <configuration>
                  <id>${stagingarea.ds.id}</id>
                  <dbUser>${stagingarea.ds.user}</dbUser>
                  <dbPassword>${stagingarea.ds.password}</dbPassword>
                  <dataSource>jdbc/StagingAreaDatasource</dataSource>
                </configuration>
              </execution>
              <execution>
                <id>bind-lumira</id>
                <phase>deploy</phase>
                <goals>
                  <goal>bind-hana-dbms</goal>
                </goals>
                <configuration>
                  <id>${lumira.ds.id}</id>
                  <dbUser>${lumira.ds.user}</dbUser>
                  <dbPassword>${lumira.ds.password}</dbPassword>
                  <dataSource>lumira</dataSource>
                </configuration>
              </execution>
            </executions>
            <configuration>
              <application>${hcp.application}</application>
            </configuration>
          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
      <id>unbind-productive-instance</id>
      <activation>
        <property>
          <name>action</name>
          <value>unbind-productive-instance</value>
        </property>
      </activation>
      <build>
        <plugins>
          <plugin>
            <groupId>com.sap.cloud</groupId>
            <artifactId>neo-java-web-maven-plugin</artifactId>
            <executions>
              <execution>
                <id>unbind-lumira</id>
                <phase>deploy</phase>
                <goals>
                  <goal>unbind-hana-dbms</goal>
                </goals>
                <configuration>
                  <dataSource>lumira</dataSource>
                </configuration>
              </execution>
              <execution>
                <id>unbind-staging-area</id>
                <phase>deploy</phase>
                <goals>
                  <goal>unbind-hana-dbms</goal>
                </goals>
                <configuration>
                  <dataSource>jdbc/StagingAreaDatasource</dataSource>
                </configuration>
              </execution>
              <execution>
                <id>unbind-default</id>
                <phase>deploy</phase>
                <goals>
                  <goal>unbind-hana-dbms</goal>
                </goals>
                <configuration>
                  <dataSource>jdbc/DefaultDB</dataSource>
                </configuration>
              </execution>
            </executions>
            <configuration>
              <application>${hcp.application}</application>
              <failOnError>false</failOnError>
            </configuration>
          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
      <id>set-vm-arguments</id>
      <activation>
        <property>
          <name>action</name>
          <value>set-vm-arguments</value>
        </property>
      </activation>
      <build>
        <plugins>
          <plugin>
            <groupId>com.sap.cloud</groupId>
            <artifactId>neo-java-web-maven-plugin</artifactId>
            <executions>
              <execution>
                <id>set-application-property</id>
                <phase>deploy</phase>
                <goals>
                  <goal>set-application-property</goal>
                </goals>
              </execution>
            </executions>
            <configuration>
              <application>${hcp.application}</application>
              <vmArguments>${hcp.vm.arguments}</vmArguments>
            </configuration>
          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
      <id>enable-application</id>
      <activation>
        <property>
          <name>action</name>
          <value>enable</value>
        </property>
      </activation>
      <build>
        <plugins>
          <plugin>
            <groupId>com.sap.cloud</groupId>
            <artifactId>neo-java-web-maven-plugin</artifactId>
            <executions>
              <execution>
                <id>enable-application</id>
                <phase>deploy</phase>
                <goals>
                  <goal>enable</goal>
                </goals>
              </execution>
            </executions>
            <configuration>
              <application>${hcp.application}</application>
            </configuration>
          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
      <id>disable-application</id>
      <activation>
        <property>
          <name>action</name>
          <value>disable</value>
        </property>
      </activation>
      <build>
        <plugins>
          <plugin>
            <groupId>com.sap.cloud</groupId>
            <artifactId>neo-java-web-maven-plugin</artifactId>
            <executions>
              <execution>
                <id>enable-application</id>
                <phase>deploy</phase>
                <goals>
                  <goal>disable</goal>
                </goals>
              </execution>
            </executions>
            <configuration>
              <application>${hcp.application}</application>
              <failOnError>false</failOnError>
            </configuration>
          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
      <id>create-html5</id>
      <activation>
        <property>
          <name>action</name>
          <value>create-html5</value>
        </property>
      </activation>
      <properties>
        <hcp.application.version>0.0.1</hcp.application.version>
      </properties>
      <build>
        <plugins>
          <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-resources-plugin</artifactId>
            <version>2.7</version>
            <executions>
              <execution>
                <id>copy-standard-html5-application-descriptor</id>
                <phase>process-resources</phase>
                <goals>
                  <goal>copy-resources</goal>
                </goals>
                <configuration>
                  <outputDirectory>${standard.content.dir}</outputDirectory>
                  <resources>
                    <resource>
                      <directory>content</directory>
                      <includes>
                        <include>${hcp.application.descriptor}</include>
                      </includes>
                      <filtering>true</filtering>
                    </resource>
                  </resources>
                  <filters>
                    <filter>filters/standard-content.properties</filter>
                  </filters>
                </configuration>
              </execution>
              <execution>
                <id>copy-maintenance-html5-application-descriptor</id>
                <phase>process-resources</phase>
                <goals>
                  <goal>copy-resources</goal>
                </goals>
                <configuration>
                  <outputDirectory>${maintenance.content.dir}</outputDirectory>
                  <resources>
                    <resource>
                      <directory>content</directory>
                      <includes>
                        <include>${hcp.application.descriptor}</include>
                      </includes>
                      <filtering>true</filtering>
                    </resource>
                  </resources>
                  <filters>
                    <filter>filters/maintenance-content.properties</filter>
                  </filters>
                </configuration>
              </execution>
            </executions>
          </plugin>
          <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <executions>
              <execution>
                <id>unpack-standard-html5-application</id>
                <phase>deploy</phase>
                <goals>
                  <goal>unpack</goal>
                </goals>
                <configuration>
                  <artifactItems>
                    <artifactItem>
                      <groupId>com.sap.smartbi.ui</groupId>
                      <artifactId>smartbi</artifactId>
                      <version>${binaries.version}</version>
                      <classifier>logout</classifier>
                      <type>zip</type>
                    </artifactItem>
                  </artifactItems>
                  <outputDirectory>${standard.content.dir}</outputDirectory>
                  <overWriteReleases>false</overWriteReleases>
                  <overWriteSnapshots>true</overWriteSnapshots>
                </configuration>
              </execution>
              <execution>
                <id>unpack-maintenance-html5-application</id>
                <phase>deploy</phase>
                <goals>
                  <goal>unpack</goal>
                </goals>
                <configuration>
                  <artifactItems>
                    <artifactItem>
                      <groupId>com.sap.smartbi.ui</groupId>
                      <artifactId>smartbi</artifactId>
                      <version>${binaries.version}</version>
                      <classifier>maintenance</classifier>
                      <type>zip</type>
                    </artifactItem>
                  </artifactItems>
                  <outputDirectory>${maintenance.content.dir}</outputDirectory>
                  <overWriteReleases>false</overWriteReleases>
                  <overWriteSnapshots>true</overWriteSnapshots>
                </configuration>
              </execution>
            </executions>
          </plugin>
          <plugin>
            <groupId>com.sap.smartbi.tooling</groupId>
            <artifactId>smartbi-devops-maven-plugin</artifactId>
            <executions>
              <execution>
                <id>create-html5-application</id>
                <phase>deploy</phase>
                <goals>
                  <goal>create-html5-application</goal>
                </goals>
              </execution>
              <execution>
                <id>import-maintenance-html5-application</id>
                <phase>deploy</phase>
                <goals>
                  <goal>import-html5-application-content</goal>
                </goals>
                <configuration>
                  <content>${maintenance.content.dir}</content>
                  <version>${hcp.maintenance.application.version}</version>
                </configuration>
              </execution>
              <execution>
                <id>import-standard-html5-application</id>
                <phase>deploy</phase>
                <goals>
                  <goal>import-html5-application-content</goal>
                  <goal>activate-html5-application-version</goal>
                  <goal>start-html5-application</goal>
                </goals>
                <configuration>
                  <content>${standard.content.dir}</content>
                  <version>${hcp.application.version}</version>
                </configuration>
              </execution>
            </executions>
            <configuration>
              <application>${hcp.application}</application>
            </configuration>
          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
      <id>activate-html5</id>
      <activation>
        <property>
          <name>action</name>
          <value>activate-html5</value>
        </property>
      </activation>
      <build>
        <plugins>
          <plugin>
            <groupId>com.sap.smartbi.tooling</groupId>
            <artifactId>smartbi-devops-maven-plugin</artifactId>
            <executions>
              <execution>
                <id>activate-html5</id>
                <phase>deploy</phase>
                <goals>
                  <goal>activate-html5-application-version</goal>
                </goals>
                <configuration>
                  <application>${hcp.application}</application>
                  <version>${hcp.application.version}</version>
                </configuration>
              </execution>
            </executions>
          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
      <id>delete-html5</id>
      <activation>
        <property>
          <name>action</name>
          <value>delete-html5</value>
        </property>
      </activation>
      <build>
        <plugins>
          <plugin>
            <groupId>com.sap.smartbi.tooling</groupId>
            <artifactId>smartbi-devops-maven-plugin</artifactId>
            <executions>
              <execution>
                <id>delete-html5-application</id>
                <phase>deploy</phase>
                <goals>
                  <goal>delete-html5-application</goal>
                </goals>
              </execution>
            </executions>
            <configuration>
              <application>${hcp.application}</application>
            </configuration>
          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
      <id>update-html5</id>
      <activation>
        <property>
          <name>action</name>
          <value>update-html5</value>
        </property>
      </activation>
      <build>
        <plugins>
          <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-resources-plugin</artifactId>
            <version>2.7</version>
            <executions>
              <execution>
                <id>copy-standard-html5-application-descriptor</id>
                <phase>process-resources</phase>
                <goals>
                  <goal>copy-resources</goal>
                </goals>
                <configuration>
                  <outputDirectory>${standard.content.dir}</outputDirectory>
                  <resources>
                    <resource>
                      <directory>content</directory>
                      <includes>
                        <include>${hcp.application.descriptor}</include>
                      </includes>
                      <filtering>true</filtering>
                    </resource>
                  </resources>
                  <filters>
                    <filter>filters/standard-content.properties</filter>
                  </filters>
                </configuration>
              </execution>
              <execution>
                <id>copy-maintenance-html5-application-descriptor</id>
                <phase>process-resources</phase>
                <goals>
                  <goal>copy-resources</goal>
                </goals>
                <configuration>
                  <outputDirectory>${maintenance.content.dir}</outputDirectory>
                  <resources>
                    <resource>
                      <directory>content</directory>
                      <includes>
                        <include>${hcp.application.descriptor}</include>
                      </includes>
                      <filtering>true</filtering>
                    </resource>
                  </resources>
                  <filters>
                    <filter>filters/maintenance-content.properties</filter>
                  </filters>
                </configuration>
              </execution>
            </executions>
          </plugin>
          <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <executions>
              <execution>
                <id>unpack-standard-html5-application</id>
                <phase>deploy</phase>
                <goals>
                  <goal>unpack</goal>
                </goals>
                <configuration>
                  <artifactItems>
                    <artifactItem>
                      <groupId>com.sap.smartbi.ui</groupId>
                      <artifactId>smartbi</artifactId>
                      <version>${binaries.version}</version>
                      <classifier>logout</classifier>
                      <type>zip</type>
                    </artifactItem>
                  </artifactItems>
                  <outputDirectory>${standard.content.dir}</outputDirectory>
                  <overWriteReleases>false</overWriteReleases>
                  <overWriteSnapshots>true</overWriteSnapshots>
                </configuration>
              </execution>
              <execution>
                <id>unpack-maintenance-html5-application</id>
                <phase>deploy</phase>
                <goals>
                  <goal>unpack</goal>
                </goals>
                <configuration>
                  <artifactItems>
                    <artifactItem>
                      <groupId>com.sap.smartbi.ui</groupId>
                      <artifactId>smartbi</artifactId>
                      <version>${binaries.version}</version>
                      <classifier>maintenance</classifier>
                      <type>zip</type>
                    </artifactItem>
                  </artifactItems>
                  <outputDirectory>${maintenance.content.dir}</outputDirectory>
                  <overWriteReleases>false</overWriteReleases>
                  <overWriteSnapshots>true</overWriteSnapshots>
                </configuration>
              </execution>
            </executions>
          </plugin>
          <plugin>
            <groupId>com.sap.smartbi.tooling</groupId>
            <artifactId>smartbi-devops-maven-plugin</artifactId>
            <executions>
              <execution>
                <id>update-maintenance-html5-application</id>
                <phase>deploy</phase>
                <goals>
                  <goal>import-html5-application-content</goal>
                </goals>
                <configuration>
                  <content>${maintenance.content.dir}</content>
                  <version>${hcp.maintenance.application.version}</version>
                </configuration>
              </execution>
              <execution>
                <id>update-standard-html5-application</id>
                <phase>deploy</phase>
                <goals>
                  <goal>import-html5-application-content</goal>
                  <goal>activate-html5-application-version</goal>
                </goals>
                <configuration>
                  <content>${standard.content.dir}</content>
                  <version>${hcp.application.version}</version>
                </configuration>
              </execution>
            </executions>
            <configuration>
              <application>${hcp.application}</application>
            </configuration>
          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
      <id>subscribe-html5</id>
      <activation>
        <property>
          <name>action</name>
          <value>subscribe-html5</value>
        </property>
      </activation>
      <build>
        <plugins>
          <plugin>
            <groupId>com.sap.smartbi.tooling</groupId>
            <artifactId>smartbi-devops-maven-plugin</artifactId>
            <executions>
              <execution>
                <id>create-html5-application-subscription-candidate</id>
                <phase>deploy</phase>
                <goals>
                  <goal>create-html5-subscription-candidate</goal>
                </goals>
                <configuration>
                  <account>${hcp.provider.account}</account>
                  <consumerAccount>${hcp.account}</consumerAccount>
                </configuration>
              </execution>
              <execution>
                <id>subscribe-html5-application</id>
                <phase>deploy</phase>
                <goals>
                  <goal>create-html5-subscription</goal>
                </goals>
                <configuration>
                  <providerAccount>${hcp.provider.account}</providerAccount>
                  <subscription>${hcp.application}</subscription>
                </configuration>
              </execution>
            </executions>
            <configuration>
              <application>${hcp.application}</application>
            </configuration>
          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
      <id>unsubscribe-html5</id>
      <activation>
        <property>
          <name>action</name>
          <value>unsubscribe-html5</value>
        </property>
      </activation>
      <build>
        <plugins>
          <plugin>
            <groupId>com.sap.smartbi.tooling</groupId>
            <artifactId>smartbi-devops-maven-plugin</artifactId>
            <executions>
              <execution>
                <id>delete-html5-subscription-candidate</id>
                <phase>deploy</phase>
                <goals>
                  <goal>delete-html5-subscription-candidate</goal>
                </goals>
                <configuration>
                  <account>${hcp.provider.account}</account>
                  <consumerAccount>${hcp.account}</consumerAccount>
                  <application>${hcp.application}</application>
                </configuration>
              </execution>
            </executions>
          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
        <id>assign-html5-role</id>
      <activation>
        <property>
          <name>action</name>
          <value>assign-html5-role</value>
        </property>
      </activation>
      <build>
        <plugins>
          <plugin>
            <groupId>com.sap.smartbi.tooling</groupId>
            <artifactId>smartbi-devops-maven-plugin</artifactId>
            <executions>
              <execution>
                <id>create-html5-application-role-assignment</id>
                <phase>deploy</phase>
                <goals>
                  <goal>create-html5-application-role-assignments</goal>
                </goals>
                <configuration>
                  <application>${hcp.application}</application>
                  <assignments>
                    <assignment>
                        <permission>useApplications</permission>
                        <role>${hcp.html5.role}</role>
                    </assignment>
                  </assignments>
                </configuration>
              </execution>
            </executions>
          </plugin>
        </plugins>
      </build>
    </profile>

  </profiles>

  <build>
    <defaultGoal>deploy</defaultGoal>
    <plugins>
	<!--
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>properties-maven-plugin</artifactId>
        <version>1.0-tc</version>
        <executions>
          <execution>
            <id>read-mandatory-properties</id>
            <phase>validate</phase>
            <goals>
              <goal>read-project-properties</goal>
            </goals>
            <configuration>
              <files>
                <file>credentials.properties</file>
                <file>versions.properties</file>
              </files>
            </configuration>
          </execution>
          <execution>
            <id>read-optional-properties</id>
            <phase>validate</phase>
            <goals>
              <goal>read-project-properties</goal>
            </goals>
            <configuration>
              <files>
                <file>${hcp.account}-${hcp.application}-bindings.properties</file>
              </files>
              <quiet>true</quiet>
            </configuration>
          </execution>
        </executions>
      </plugin>
	  -->
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-enforcer-plugin</artifactId>
        <executions>
          <execution>
            <id>enforce-property</id>
            <phase>validate</phase>
            <goals>
              <goal>enforce</goal>
            </goals>
            <configuration>
              <rules>
                <requireJavaVersion>
                  <version>[1.7,)</version>
                </requireJavaVersion>
                <requireProperty>
                  <property>action</property>
                  <message>
                    You must set an action property! -Daction=[deploy,
                    rebind-schemas, start, stop, spawn, respawn, hot-update,
                    put-destinations, rolling-update]
                  </message>
                </requireProperty>
                <requireProperty>
                  <property>hcp.host</property>
                  <message>
                    You must set an hcp.host property! (see
                    credentials.properties.template)
                  </message>
                </requireProperty>
                <requireProperty>
                  <property>hcp.application</property>
                  <message>
                    You must set an hcp.application property!
                    -Dhcp.application=...
                  </message>
                  <!-- <regex>^(?!lumira$)</regex> <regexMessage>For safety reasons, 
										the hcp.application property should not be equal to "lumira"</regexMessage> -->
                </requireProperty>
              </rules>
              <fail>true</fail>
            </configuration>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-clean-plugin</artifactId>
        <executions>
          <execution>
            <id>clean-binaries-dir</id>
            <phase>initialize</phase>
            <goals>
              <goal>clean</goal>
            </goals>
            <configuration>
              <excludeDefaultDirectories>true</excludeDefaultDirectories>
              <filesets>
                <fileset>
                  <!-- Clean ${binaries.dir}, in case ${custom.dir} was specified 
										on the command line -->
                  <directory>${binaries.dir}</directory>
                </fileset>
              </filesets>
            </configuration>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-dependency-plugin</artifactId>
        <executions>
          <execution>
            <id>purge-local-dependencies</id>
            <phase>initialize</phase>
            <goals>
              <goal>purge-local-repository</goal>
            </goals>
            <configuration>
              <manualIncludes>
                <manualInclude>com.sap.smartbi.backend</manualInclude>
              </manualIncludes>
              <resolutionFuzziness>groupId</resolutionFuzziness>
              <skip>${skip.purge.resolved}</skip>
              <snapshotsOnly>true</snapshotsOnly>
              <verbose>true</verbose>
            </configuration>
          </execution>
          <execution>
            <id>copy</id>
            <phase>initialize</phase>
            <goals>
              <goal>copy</goal>
            </goals>
            <configuration>
              <!--<skip>${skip.purge.resolved}</skip> -->
              <skip>${skip.copy.artifacts}</skip>
              <artifactItems>
                <artifactItem>
                  <groupId>com.sap.smartbi.ui</groupId>
                  <artifactId>smartbi</artifactId>
                  <version>${binaries.version}</version>
                  <classifier>Cloud</classifier>
                  <type>war</type>
                  <overWrite>false</overWrite>
                  <destFileName>smartbi.war</destFileName>
                </artifactItem>
                <artifactItem>
                  <groupId>com.sap.smartbi.backend</groupId>
                  <artifactId>smartbi-admin-hcp</artifactId>
                  <version>${binaries.version}</version>
                  <type>war</type>
                  <overWrite>false</overWrite>
                  <destFileName>smartbi-admin.war</destFileName>
                </artifactItem>
                <artifactItem>
                  <groupId>com.sap.smartbi.backend</groupId>
                  <artifactId>smartbi-backend-hcp</artifactId>
                  <version>${binaries.version}</version>
                  <type>war</type>
                  <overWrite>false</overWrite>
                  <destFileName>smartbi-backend.war</destFileName>
                </artifactItem>
                <artifactItem>
                  <groupId>com.sap.smartbi.backend</groupId>
                  <artifactId>smartbi-crawler-hcp</artifactId>
                  <version>${binaries.version}</version>
                  <type>war</type>
                  <overWrite>false</overWrite>
                  <destFileName>smartbi-crawler.war</destFileName>
                </artifactItem>
                <artifactItem>
                  <groupId>com.sap.cci.smartbi</groupId>
                  <artifactId>CCIQueryService</artifactId>
                  <version>${binaries.version}</version>
                  <type>war</type>
                  <overWrite>false</overWrite>
                  <destFileName>CCIQueryService.war</destFileName>
                </artifactItem>
              </artifactItems>
              <outputDirectory>${binaries.dir}</outputDirectory>
              <overWriteReleases>false</overWriteReleases>
              <overWriteSnapshots>true</overWriteSnapshots>
            </configuration>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <groupId>com.sap.cloud</groupId>
        <artifactId>neo-java-web-maven-plugin</artifactId>
        <executions>
          <execution>
            <id>setup-sdk</id>
            <phase>initialize</phase>
            <goals>
              <goal>install-sdk</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <groupId>org.codehaus.gmaven</groupId>
        <artifactId>groovy-maven-plugin</artifactId>
        <version>2.0</version>
        <executions>
          <execution>
            <phase>initialize</phase>
            <goals>
              <goal>execute</goal>
            </goals>
            <configuration>
              <source>
                project.properties["hcp.application.uppercase"] =
                "${hcp.application}".toUpperCase()
              </source>
            </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>

    <pluginManagement>
      <plugins>
        <plugin>
          <groupId>org.eclipse.m2e</groupId>
          <artifactId>lifecycle-mapping</artifactId>
          <version>1.0.0</version>
          <configuration>
            <lifecycleMappingMetadata>
              <pluginExecutions>
                <pluginExecution>
                  <pluginExecutionFilter>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-enforcer-plugin</artifactId>
                    <versionRange>[1.0.0,)</versionRange>
                    <goals>
                      <goal>enforce</goal>
                    </goals>
                  </pluginExecutionFilter>
                  <action>
                    <ignore />
                  </action>
                </pluginExecution>
              </pluginExecutions>
            </lifecycleMappingMetadata>
          </configuration>
        </plugin>
        <plugin>
          <groupId>com.sap.cloud</groupId>
          <artifactId>neo-java-web-maven-plugin</artifactId>
          <version>${neo.maven.plugin.version}</version>
          <configuration>
            <sdkInstallPath>${project.build.directory}/sdk${neo.maven.plugin.version}</sdkInstallPath>
            <host>${hcp.host}</host>
            <user>${hcp.user}</user>
            <password>${hcp.password}</password>
            <account>${hcp.account}</account>
            <source>${deploy.dir}</source>
            <synchronous>true</synchronous>
            <consoleHttpProxyHost>${hcp.proxy.host}</consoleHttpProxyHost>
            <consoleHttpProxyPort>${hcp.proxy.port}</consoleHttpProxyPort>
            <consoleHttpsProxyHost>${hcp.proxy.host}</consoleHttpsProxyHost>
            <consoleHttpsProxyPort>${hcp.proxy.port}</consoleHttpsProxyPort>
            <consoleRetryCount>${retry.count}</consoleRetryCount>
            <connections>${hcp.connections}</connections>
          </configuration>
        </plugin>
        <plugin>
          <groupId>com.sap.smartbi.tooling</groupId>
          <artifactId>smartbi-devops-maven-plugin</artifactId>
          <version>0.15.0-SNAPSHOT</version>
          <configuration>
            <account>${hcp.account}</account>
            <dispatcher>${hcp.dispatcher}</dispatcher>
            <host>${hcp.host}</host>
            <password>${hcp.password}</password>
            <proxyHost>${hcp.proxy.host}</proxyHost>
            <proxyPort>${hcp.proxy.port}</proxyPort>
            <user>${hcp.user}</user>
          </configuration>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-invoker-plugin</artifactId>
          <version>2.0.0</version>
          <configuration>
            <pom>utils/execute-sql.pom.xml</pom>
            <goals>
              <goal>integration-test</goal>
            </goals>
            <showErrors>true</showErrors>
            <properties>
              <hcp.host>${hcp.host}</hcp.host>
              <hcp.account>${hcp.account}</hcp.account>
              <hcp.user>${hcp.user}</hcp.user>
              <hcp.password>${hcp.password}</hcp.password>
              <hcp.proxy.host>${hcp.proxy.host}</hcp.proxy.host>
              <hcp.proxy.port>${hcp.proxy.port}</hcp.proxy.port>
              <hcp.db.user>${hcp.db.login.user}</hcp.db.user>
              <hcp.db.password>${hcp.db.login.password}</hcp.db.password>
              <retry.count>${retry.count}</retry.count>
            </properties>
          </configuration>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-deploy-plugin</artifactId>
          <configuration>
            <!-- We don't want to deploy anything on Nexus -->
            <skip>true</skip>
          </configuration>
        </plugin>
      </plugins>
    </pluginManagement>
  </build>
</project>